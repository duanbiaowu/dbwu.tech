<!doctype html>

<html lang="en">

<head>
  <title>LeetCode 刷题必懂位运算 - 蛮荆</title>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="" />
<meta name="author" content="" />
<link rel="shortcut icon" href="https://dbwu.tech/favicon.ico" type="image/x-icon" /><meta property="og:title" content="LeetCode 刷题必懂位运算" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dbwu.tech/posts/algorithm/bit_operations/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-02T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-02-02T00:00:00+00:00" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="LeetCode 刷题必懂位运算"/>
<meta name="twitter:description" content=""/>

<meta name="generator" content="Hugo 0.120.3">
    
    <script src="https://dbwu.tech/js/mathjax-config.js" defer></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-CZMGTTFLNY"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3261056100776781" crossorigin="anonymous"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-CZMGTTFLNY');
  </script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>


  <link rel="stylesheet" href="https://dbwu.tech/fontawesome/css/normalize.min.css" />
  <link rel="stylesheet" href="https://dbwu.tech/fontawesome/css/all.min.css" />
  
    
    <link href="//fonts.googleapis.com/css?family=Staatliches" rel="stylesheet">
  
  
  <link rel="stylesheet" type="text/css" href="https://dbwu.tech/css/styles-light.css" />
  </head>

<body>
  <div id="container">
    <header>
      
      <h1>
        <a href="https://dbwu.tech/">蛮荆</a>
      </h1>

      <ul id="social-media">
      </ul>
      
    </header>

    
<nav>
    <ul>
        
        <li>
            <a class="active" href="https://dbwu.tech/posts/">
                <i class="fa-li fa  fa-lg"></i><span>归档</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://dbwu.tech/tags/">
                <i class="fa-li fa  fa-lg"></i><span>标签</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://github.com/duanbiaowu">
                <i class="fa-li fa  fa-lg"></i><span>Github</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://dbwu.tech/index.xml">
                <i class="fa-li fa  fa-lg"></i><span>RSS</span>
            </a>
        </li>
        
    </ul>
</nav>


    <main>




<article>

    <h1>LeetCode 刷题必懂位运算</h1>

    
      
<p>
    <span>2022-02-02</span>
    
    
    <a class="article-tag" href="https://dbwu.tech/tags/%E7%AE%97%E6%B3%95">算法</a>
    
    
    <a class="article-tag" href="https://dbwu.tech/tags/leetcode">LeetCode</a>
    
</p>

    

    
      

    

    <h2 id="位运算">位运算</h2>
<h3 id="and">AND</h3>
<p>表示将两个二进制数按位进行 <strong>与</strong> 运算，只有当两个对应的位都为 1 时，结果位才为 1，其他情况结果位为 0, Go 语言中使用运算符 <code>&amp;</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0100</span> <span style="color:#999;font-style:italic"># 4 的二进制表示 </span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0111</span> <span style="color:#999;font-style:italic"># 7 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0100</span> <span style="color:#999;font-style:italic"># 结果 = 4</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#999;font-style:italic">// Go 语言表示
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span><span style="color:#24909d">println</span>(<span style="color:#3677a9">4</span> &amp; <span style="color:#3677a9">7</span>)
</span></span></code></pre></div><h3 id="or">OR</h3>
<p>表示将两个二进制数按位进行 <strong>或</strong> 运算，只要两个对应的位任意一个为 1，结果位为 1，两个位都为 0 时，结果位才为 0, Go 语言中使用运算符 <code>|</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0100</span> <span style="color:#999;font-style:italic"># 4 的二进制表示 </span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0111</span> <span style="color:#999;font-style:italic"># 7 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0111</span> <span style="color:#999;font-style:italic"># 结果 = 7</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#999;font-style:italic">// Go 语言表示
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span><span style="color:#24909d">println</span>(<span style="color:#3677a9">4</span> | <span style="color:#3677a9">7</span>)
</span></span></code></pre></div><h3 id="xor">XOR</h3>
<p>表示将两个二进制数按位进行 <strong>异或</strong> 运算，只有两个对应的位不相等时，结果位为 1，其他情况结果位为 0, Go 语言中使用运算符 <code>^</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0100</span> <span style="color:#999;font-style:italic"># 4 的二进制表示 </span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0111</span> <span style="color:#999;font-style:italic"># 7 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0011</span> <span style="color:#999;font-style:italic"># 结果 = 3</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#999;font-style:italic">// Go 语言表示
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span><span style="color:#24909d">println</span>(<span style="color:#3677a9">4</span> ^ <span style="color:#3677a9">7</span>)
</span></span></code></pre></div><h3 id="complement">Complement</h3>
<p>表示将二进制数按位进行 <strong>取反</strong> 运算，也就是每个位从 0 变成 1，1 变成 0, Go 语言中使用运算符 <code>^</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#3677a9">0111</span> <span style="color:#3677a9">1111</span> <span style="color:#999;font-style:italic"># 127 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">1000</span> <span style="color:#3677a9">0000</span> <span style="color:#999;font-style:italic"># 取反之后 = -128</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#999;font-style:italic">// Go 语言表示
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span><span style="color:#24909d">println</span>(^<span style="color:#3677a9">127</span>)
</span></span></code></pre></div><p>对于有符号整型，最高位是是符号位，计算机用 <strong>补码</strong> 表示负数。</p>
<blockquote>
<p>补码 = 原码取反 + 1</p>
</blockquote>
<p>其中 <strong>原码</strong> 以负数的绝对值的二进制表示。</p>
<p>下面举两个例子来说明。</p>
<ol>
<li>计算负数 -1 的二进制表示</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 计算 -1 的原码</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 原码以负数的绝对值 (1) 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 所以 -1 的原码 = 00000001</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 将原码进行取反运算</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">00000001</span>  <span style="color:#999;font-style:italic"># -1 原码</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">11111110</span>  <span style="color:#999;font-style:italic"># 取反结果</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 在取反的结果上加 1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">11111110</span> <span style="color:#999;font-style:italic"># 取反结果</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">11111111</span> <span style="color:#999;font-style:italic"># -1 的二进制表示</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#999;font-style:italic">// Go 语言表示
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span><span style="color:#24909d">println</span>((^<span style="color:#3677a9">1</span>) + <span style="color:#3677a9">1</span>)
</span></span></code></pre></div><ol start="2">
<li>计算 -128 的二进制表示</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 计算 -128 的原码</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 原码以负数的绝对值 (128) 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 所以 -128 的原码 = 10000000</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 将原码进行取反运算</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">10000000</span>  <span style="color:#999;font-style:italic"># -128 原码</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">01111111</span>  <span style="color:#999;font-style:italic"># 取反结果</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 在取反的结果上加 1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">01111111</span> <span style="color:#999;font-style:italic"># 取反结果</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">10000000</span> <span style="color:#999;font-style:italic"># -128 的二进制表示</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#999;font-style:italic">// Go 语言表示
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span><span style="color:#24909d">println</span>((^<span style="color:#3677a9">128</span>) + <span style="color:#3677a9">1</span>)
</span></span></code></pre></div><h3 id="溢出">溢出</h3>
<p>如果计算结果产生溢出，那么最高位溢出的部分会被省略掉。</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#3677a9">11111111</span> <span style="color:#999;font-style:italic"># -1 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">00000001</span> <span style="color:#999;font-style:italic">#  1 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">00000000</span> <span style="color:#999;font-style:italic">#  0</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#3677a9">10000000</span> <span style="color:#999;font-style:italic"># -128 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">01111111</span> <span style="color:#999;font-style:italic">#  127 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">11111111</span> <span style="color:#999;font-style:italic"># -1 </span>
</span></span></code></pre></div><h3 id="位移">位移</h3>
<p><code>&lt;&lt;</code> 表示左移，<code>&gt;&gt;</code> 表示右移。</p>
<p>数字 8 右移 2 位结果为 2。</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">1000</span> <span style="color:#999;font-style:italic"># 8 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0010</span> <span style="color:#999;font-style:italic"># 2</span>
</span></span></code></pre></div><p>数字 8 左移 2 位结果为 32。</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">1000</span> <span style="color:#999;font-style:italic"># 8 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0010</span> <span style="color:#3677a9">0000</span> <span style="color:#999;font-style:italic"># 32</span>
</span></span></code></pre></div><blockquote>
<p>将数字左移 1 位等于将该数字乘以 2, 因为在二进制中，左移 1 位就是将每个位向左移动 1 位，而每 1 位的位置都是 2 的幂，反过来说，将数字右移 1 位等于将该数字除以 2。</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#999;font-style:italic">// Go 语言表示
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span><span style="color:#24909d">println</span>(<span style="color:#3677a9">8</span> &gt;&gt; <span style="color:#3677a9">2</span>) <span style="color:#999;font-style:italic">// 2
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span><span style="color:#24909d">println</span>(<span style="color:#3677a9">8</span> &lt;&lt; <span style="color:#3677a9">2</span>) <span style="color:#999;font-style:italic">// 32
</span></span></span></code></pre></div><hr>
<h2 id="练习">练习</h2>
<h3 id="1-判断数字-k-第-n-位是否为-1">1. 判断数字 K 第 n 位是否为 1</h3>
<p>解题思路:</p>
<ol>
<li>构造一个数字 X，该数字除了第 n 位为 1，其他位都为 0 (利用左移)</li>
<li>将数字 K 与数字 X 进行 <code>&amp;</code> 运算并判断结果是否大于 0, 如果大于 0, 表示数字 K 的第 n 位为 1, 否则表示数字 K 的第 n 位为 0</li>
</ol>
<p>例如分别测试数字 7 的第 2 位和第 3 位是否为 1:</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 检测 7 的第 2 位是否为 1</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0111</span> <span style="color:#999;font-style:italic"># 7 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0100</span> <span style="color:#999;font-style:italic"># 构造的数字，除了第 2 位，其他位全部为 0</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0100</span> <span style="color:#999;font-style:italic"># 结果为 4, 表示 7 的第 2 位等于 1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 检测 7 的第 3 位是否为 1</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0111</span> <span style="color:#999;font-style:italic"># 7 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">1000</span> <span style="color:#999;font-style:italic"># 构造的数字，除了第 3 位，其他位全部为 0</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0000</span> <span style="color:#999;font-style:italic"># 结果为 0, 表示 7 的第 3 位不等于 1</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#999;font-style:italic">// Go 语言表示
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span><span style="color:#24909d">println</span>(<span style="color:#3677a9">7</span> &amp; (<span style="color:#3677a9">1</span> &lt;&lt; <span style="color:#3677a9">2</span>))
</span></span><span style="display:flex;"><span><span style="color:#24909d">println</span>(<span style="color:#3677a9">7</span> &amp; (<span style="color:#3677a9">1</span> &lt;&lt; <span style="color:#3677a9">3</span>))
</span></span></code></pre></div><h3 id="2-判断数字-k-是否为-2-的整数次幂">2. 判断数字 K 是否为 2 的整数次幂</h3>
<p>解题思路:</p>
<p>首先看一下 2 的整数次幂都有什么特征？</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0010</span> <span style="color:#999;font-style:italic"># 2 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0100</span> <span style="color:#999;font-style:italic"># 4 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">1000</span> <span style="color:#999;font-style:italic"># 8 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0001</span> <span style="color:#3677a9">0000</span> <span style="color:#999;font-style:italic"># 16 的二进制表示</span>
</span></span></code></pre></div><p>特征就是二进制表示中只有 1 位为 1, 其他位全部为 0, 因此只需要构造一个数字 X, X 和 K 正好相反，只有 1 位为 0, 其他位全部为 1,
将数字 K 与数字 X 进行 <code>&amp;</code> 运算并判断结果是否等于 0, 如果等于 0, 表示数字 K 等于 2 的整数次幂, 否则表示数字 K 不等于 2 的整数次幂。</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0010</span> <span style="color:#999;font-style:italic"># 2 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0001</span> <span style="color:#999;font-style:italic"># 数字 X, 也就是 1 的二进制表示</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0100</span> <span style="color:#999;font-style:italic"># 4 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0011</span> <span style="color:#999;font-style:italic"># 数字 X, 也就是 3 的二进制表示</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">1000</span> <span style="color:#999;font-style:italic"># 8 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0111</span> <span style="color:#999;font-style:italic"># 数字 X, 也就是 7 的二进制表示</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0001</span> <span style="color:#3677a9">0000</span> <span style="color:#999;font-style:italic"># 16 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">1111</span> <span style="color:#999;font-style:italic"># 数字 X, 也就是 15 的二进制表示</span>
</span></span></code></pre></div><p>从上面的代码中可以看到，X 其实就是 K-1, 在这个基础上再执行 <code>&amp;</code> 运算即可。</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">1000</span> <span style="color:#999;font-style:italic"># 8 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0111</span> <span style="color:#999;font-style:italic"># 数字 X, 也就是 7 的二进制表示</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 执行 &amp; 运算</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">1000</span> <span style="color:#999;font-style:italic"># 8 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0111</span> <span style="color:#999;font-style:italic"># 7 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0000</span> <span style="color:#999;font-style:italic"># 0 结果等于 0, 表示 8 等于 2 的整数次幂</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#999;font-style:italic">// Go 语言表示
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span><span style="color:#24909d">println</span>(<span style="color:#3677a9">8</span>&amp;(<span style="color:#3677a9">8</span>-<span style="color:#3677a9">1</span>) == <span style="color:#3677a9">0</span>)   <span style="color:#999;font-style:italic">// true
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span><span style="color:#24909d">println</span>(<span style="color:#3677a9">7</span>&amp;(<span style="color:#3677a9">7</span>-<span style="color:#3677a9">1</span>) == <span style="color:#3677a9">0</span>)   <span style="color:#999;font-style:italic">// false
</span></span></span></code></pre></div><p>通过上面的梳理过程，可以变化出另外一个小技巧: 将二进制表示中最右边为 1 的位置为 0:</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0111</span> <span style="color:#999;font-style:italic"># 7 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0110</span> <span style="color:#999;font-style:italic"># 6 的二进制表示</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 执行 &amp; 运算</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0111</span> <span style="color:#999;font-style:italic"># 7 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0110</span> <span style="color:#999;font-style:italic"># 6 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0110</span> <span style="color:#999;font-style:italic"># 6, 最右边为 1 的位已经被重置为 0</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#999;font-style:italic">// Go 语言表示
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span><span style="color:#24909d">println</span>(<span style="color:#3677a9">7</span>&amp;(<span style="color:#3677a9">7</span>-<span style="color:#3677a9">1</span>))
</span></span></code></pre></div><h3 id="3-判断数字-k-的二进制需要改变多少位可以变为数字-n">3. 判断数字 k 的二进制需要改变多少位可以变为数字 n</h3>
<p>解题思路:</p>
<ol>
<li>计算出数字 k 和 n 有多少不同的位 (使用异或运算)</li>
<li>异或计算时，只有两个对应的位不相等时，结果位为 1，其他情况结果位为 0</li>
<li>计算结果中位等于 1 的个数，就是数字 k 需要改变的位数量</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0111</span> <span style="color:#999;font-style:italic"># 7 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0110</span> <span style="color:#999;font-style:italic"># 6 的二进制表示</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"># 执行 ^ 异或运算</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0111</span> <span style="color:#999;font-style:italic"># 7 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0110</span> <span style="color:#999;font-style:italic"># 6 的二进制表示</span>
</span></span><span style="display:flex;"><span><span style="color:#3677a9">0000</span> <span style="color:#3677a9">0001</span> <span style="color:#999;font-style:italic"># 结果二进制中只有 1 位为 1</span>
</span></span></code></pre></div><p>所以数字 7 需要改变 1 位可以变为数字 6, 反过来也一样。</p>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#999;font-style:italic">// Go 语言表示
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">func</span> <span style="color:#447fcf">countBits</span>(n <span style="color:#6ab825;font-weight:bold">int</span>) <span style="color:#6ab825;font-weight:bold">int</span> {
</span></span><span style="display:flex;"><span>	count := <span style="color:#3677a9">0</span>
</span></span><span style="display:flex;"><span>	<span style="color:#6ab825;font-weight:bold">for</span> n != <span style="color:#3677a9">0</span> {
</span></span><span style="display:flex;"><span>		count += n &amp; <span style="color:#3677a9">1</span> <span style="color:#999;font-style:italic">// 如果最低位为1，则计数增加
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span>		n &gt;&gt;= <span style="color:#3677a9">1</span>        <span style="color:#999;font-style:italic">// 右移一位
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#6ab825;font-weight:bold">return</span> count
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">func</span> <span style="color:#447fcf">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#24909d">println</span>(<span style="color:#447fcf">countBits</span>(<span style="color:#3677a9">7</span> ^ <span style="color:#3677a9">6</span>)) <span style="color:#999;font-style:italic">// 1
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span>}
</span></span></code></pre></div><hr>
<h2 id="go-标准库中的位运算">Go 标准库中的位运算</h2>
<p>文章的最后介绍下 Go 语言中和位运算相关的方法。</p>
<h3 id="打印二进制表示">打印二进制表示</h3>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>fmt.<span style="color:#447fcf">Printf</span>(<span style="color:#ed9d13">&#34;%08b\n&#34;</span>, <span style="color:#3677a9">7</span>) <span style="color:#999;font-style:italic">// 00000111
</span></span></span></code></pre></div><h3 id="计算数字的二进制表示长度">计算数字的二进制表示长度</h3>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>fmt.<span style="color:#447fcf">Println</span>(bits.<span style="color:#447fcf">Len</span>(<span style="color:#3677a9">7</span>))  <span style="color:#999;font-style:italic">// 3
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span>fmt.<span style="color:#447fcf">Println</span>(bits.<span style="color:#447fcf">Len</span>(<span style="color:#3677a9">16</span>)) <span style="color:#999;font-style:italic">// 5
</span></span></span></code></pre></div><h3 id="计算数字的二进制表示中位为-1-的个数">计算数字的二进制表示中位为 1 的个数</h3>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#999;font-style:italic">// 7 的二进制表示: 0111, 有 3 位为 1
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span>fmt.<span style="color:#447fcf">Println</span>(bits.<span style="color:#447fcf">OnesCount</span>(<span style="color:#3677a9">7</span>)) <span style="color:#999;font-style:italic">// 3
</span></span></span></code></pre></div><h3 id="计算数字的二进制表示中位为-0-的个数">计算数字的二进制表示中位为 0 的个数</h3>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#999;font-style:italic">// 7 的二进制表示: 1000, 有 3 位为 0
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span>fmt.<span style="color:#447fcf">Println</span>(bits.<span style="color:#447fcf">Len</span>(<span style="color:#3677a9">8</span>) - bits.<span style="color:#447fcf">OnesCount</span>(<span style="color:#3677a9">8</span>)) <span style="color:#999;font-style:italic">// 3
</span></span></span></code></pre></div><h3 id="反转数字的二进制表示中的所有位">反转数字的二进制表示中的所有位</h3>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>fmt.<span style="color:#447fcf">Printf</span>(<span style="color:#ed9d13">&#34;%08b\n&#34;</span>, <span style="color:#3677a9">7</span>)                <span style="color:#999;font-style:italic">// 00000111
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span>fmt.<span style="color:#447fcf">Printf</span>(<span style="color:#ed9d13">&#34;%08b\n&#34;</span>, bits.<span style="color:#447fcf">Reverse8</span>(<span style="color:#3677a9">7</span>)) <span style="color:#999;font-style:italic">// 11100000   
</span></span></span></code></pre></div><h3 id="检查数字的二进制表示中位为-0-的数量">检查数字的二进制表示中位为 0 的数量</h3>
<div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#6ab825;font-weight:bold">var</span> x <span style="color:#6ab825;font-weight:bold">uint8</span> = <span style="color:#3677a9">16</span>
</span></span><span style="display:flex;"><span>fmt.<span style="color:#447fcf">Printf</span>(<span style="color:#ed9d13">&#34;%08b\n&#34;</span>, x)  <span style="color:#999;font-style:italic">// 00010000
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">// 返回从最高位开始到第一个位为 1 之间 0 的数量
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span>fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;LeadingZeros:&#34;</span>, bits.<span style="color:#447fcf">LeadingZeros8</span>(x)) <span style="color:#999;font-style:italic">// 3
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">// 返回从最低位开始到第一个位为 1 之间 0 的数量
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic"></span>fmt.<span style="color:#447fcf">Println</span>(<span style="color:#ed9d13">&#34;TrailingZeros:&#34;</span>, bits.<span style="color:#447fcf">TrailingZeros8</span>(x)) <span style="color:#999;font-style:italic">// 4
</span></span></span></code></pre></div><h2 id="扩展阅读">扩展阅读</h2>
<ul>
<li><a href="https://dbwu.tech/posts/algorithm/xor/">异或计算的妙用</a></li>
</ul>
<p><img src="https://dbwu.tech/images/algorithm/Binar_Fundamentals_00.png" alt="图片来源: https://www.terathon.com/lengyel/"></p>


</article>

<article>
    <img src="https://dbwu.tech/images/wechat.png">
</article>

<article>
    <h3>转载申请</h3>

    <p>
        本作品采用 <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">知识共享署名 4.0 国际许可协议</a> 进行许可，转载时请注明原文链接，图片在使用时请保留全部内容，商业转载请联系作者获得授权。
    </p>
</article>

<section class="post-nav">
    <ul>
        <li>
        
            <a href="https://dbwu.tech/posts/network/io-model/"><i class="fa fa-chevron-circle-left"></i> IO 模型</a>
        
        </li>
        <li>
        
            <a href="https://dbwu.tech/posts/algorithm/leetcode_bit_pattern/">LeetCode 位运算刷题模板 <i class="fa fa-chevron-circle-right"></i> </a>
        
        </li>
    </ul>
</section>
  
    
    
  


<script src="https://giscus.app/client.js"
        data-repo="duanbiaowu/dbwu.tech"
        data-repo-id="R_kgDOIkkjjw"
        data-category="Announcements"
        data-category-id="DIC_kwDOIkkjj84CV78j"
        data-mapping="specific"
        data-term="LeetCode 刷题必懂位运算"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="1"
        data-input-position="top"
        data-theme="light"
        data-lang="zh-CN"
        crossorigin="anonymous" async>
</script>




</main>
    <footer>
        <ul>
            <li>
                <h6><a href="mailto:codean.net@gmail.com">codean.net@gmail.com</a> | 
                    <img src="https://dbwu.tech/images/%E5%A4%87%E6%A1%88%E5%9B%BE%E6%A0%87.png" />
                    <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=61011302001681" target="_blank">陕公网安备 61011302001681 号</a> |
                    <a href="https://beian.miit.gov.cn" target="_blank">陕ICP备2023004378号-1</a> |
                    Rendered by <a href="https://themes.gohugo.io" title="Hugo" target="_blank">Hugo</a>
                </h6>
            </li>
            
            
        </ul>
    </footer>
</div>
<script src="https://dbwu.tech/js/scripts.js"></script>


</body>

</html>

